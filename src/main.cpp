/*
 * @Author: Skyyyy
 * @Date: 2022-03-14 14:31:15
 * @Description: Heil Diana
 */
/*
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-     :-=+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+             =%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#               :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+                *#++*@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@++-                      =@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@#.                        :@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%--                      =@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+                -.   -@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%+.              =@    +@@@@@@@@%+=#@@@@@@@@@@@@@@
@@@@@@@@@@@%+::+%@@@@@@@@@@@@@@@#.. .-:..     .*#    =@@@@@#=. :+:.-*@@@@@@@@@@@
@@@@@@@@@*: =#+: .-#@@@@@@@@@@@@@%*-=   ...  +*@#    .@@#=.-- :#@@:   -*@@@@@@@@
@@@@@@#-    %@*. +#=.-+#%%%%#*%@@@@%-    ..=%@@*=    .-. =@@=   *@.   +- -*%@@@@
@@@#=..*.   %#   -@@+ -++== . :%%=:       .-*@+ -.   *@-  +@#.  =@#:  -*   .-*%@
%+:   .#  :#@*  :%@-  .@@%. .%-.             . +%   :@@.   %@%: :@@@*: +   :%: +
 :#   .=.+@@@+ :%@@.  :@@-   =.                .-   -@@#   %@@@=.@@@@@+=#:  *: =
 :*  =%=%@@@@+:@@@@: .%@@=                       :  =@@@#  @@@@@*@@@@@@@@@*::+ =
 -:.#@@@@@@@@#@@@@@- #@@@+ .*                   .*: +@@@@* @@@@@@@@@@@@@@@@@*%#*
+%=@@@@@@@@@@@@@@@@-*@@@@# **                   .%% *@@@@@*@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@%@@@@@%=@-                    +@#%@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@#                      %@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@-                      +@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@#.  .%:             *   .#@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#%@@@%-+@@@@@@#=.    *@-             %=    .-*@@@@@@-:#@@@%=@@@@@@@@@@@
@@@@@@@@@.-#***- .+@%+:     .+@@.             #@+.     .-*@*. .+==+: *@@@@@@@@@@
@@@@@@@@@=         .      -*@@@@.             *@@@*-.     .         :%@@@@@@@@@@
@@@@@@@@@@+:. ..      .=*@@@@@@=              .%@@@@@#=.          ..#@@@@@@@@@@@
@@@@@@@@@@@@%*@@#=. .+@@@@@@@@%                -@@@@@@@@*:   .-#+.#@@@@@@@@@@@@@
                                    badCode
                                   二小姐救救我
*/

#include "ast.h"
#include "codeGen.h"
#include "def.h"
#include "gramGen.hpp"

extern astNode* astRoot;
extern codeGen* generator;
extern int      yyparse();

int main()
{
#if DEBUG
    std::cout << "[DEBUG]int main()" << std::endl;
#endif

    yyparse();

#if DEBUG
    std::cout << "[DEBUG] yyparse() finish" << std::endl;
#endif

    llvm::InitializeNativeTarget();
    llvm::InitializeNativeTargetAsmPrinter();
    llvm::InitializeNativeTargetAsmParser();
    generator = new codeGen();
    generator->codeGenerator(astRoot);
    return 0;
}